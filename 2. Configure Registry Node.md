# 2. Configuring Registry Node.

## 2.1. Creating a mirror registry with mirror registry for Red Hat OpenShift

Operating System Details

    [root@dc1fbreg01 ~]# cat /etc/redhat-release
    Red Hat Enterprise Linux release 8.7 (Ootpa)

Block Device (Hard Disk) Details
 
    [root@dc1fbreg01 ~]# lsblk

Network Configuration

    [root@dc1fbreg01 ~]# ipconfig

Route and Default Gateway Details

    [root@dc1fbreg01 ~]# route -n 

Checking repository. 

    [root@dc1fbreg01 ~]# yum repolist 
    repo id                                                     repo name
    rhel-8-appstream-rpms                                       Red Hat Enterprise Linux 8 Beta - x86_64 - Source
    rhel-8-baseos-rpms                                          Red Hat Enterprise Linux 8 Beta - x86_64 - extra-Source
    

## 2.2 Configuration DNS Setup.

Install DNS Package. 

    [root@dc1fbreg01 ~]# yum install bind bind-utils -y 

Configure DNS. 

    [root@dc1fbreg01 ~]# vim /etc/named.conf 


Create Zones 

    [root@dc1fbreg01 ~]# vim /var/named/for
    $TTL 1D
    @       IN SOA  root.redprodc1.firebolt.para.in. dc1fbreg01.redprodc1.firebolt.para.in. (
                                            0       ; serial
                                            1D      ; refresh
                                            1H      ; retry
                                            1W      ; expire
                                            3H )    ; minimum
    @       IN      NS      dc1fbreg01.redprodc1.firebolt.para.in.
    @       IN      A       192.168.0.195
    dc1fbreg01.redprodc1.firebolt.para.in.     IN      A       192.168.0.195
    dc1fbha01.redprodc1.firebolt.para.in.      IN      A       192.168.0.196
    
    dc1fbboot.redprodc1.firebolt.para.in.      IN      A       192.168.0.197
    
    api.redprodc1.firebolt.para.in.            IN      A       192.168.0.31
    api-int.redprodc1.firebolt.para.in.        IN      A       192.168.0.32
    *.apps.redprodc1.firebolt.para.in.         IN      A       192.168.0.33
    
    dc1fbmstr01.redprodc1.firebolt.para.in.        IN      A       192.168.0.64
    dc1fbmstr02.redprodc1.firebolt.para.in.        IN      A       192.168.0.65
    dc1fbmstr03.redprodc1.firebolt.para.in.        IN      A       192.168.0.66
    
    dc1fbinfr01.redprodc1.firebolt.para.in.         IN      A       192.168.0.201
    dc1fbinfr02.redprodc1.firebolt.para.in.         IN      A       192.168.0.202
    dc1fbinfr03.redprodc1.firebolt.para.in.         IN      A       192.168.0.203
    dc1fbinfr04.redprodc1.firebolt.para.in.         IN      A       192.168.0.204
    dc1fbinfr05.redprodc1.firebolt.para.in.         IN      A       192.168.0.205
    
    dc1fbwrk01.redprodc1.firebolt.para.in.        IN      A       192.168.0.206
    dc1fbwrk02.redprodc1.firebolt.para.in.        IN      A       192.168.0.207
    
    classroom.redprodc1.firebolt.para.in.      IN      A       192.168.0.195
    content.redprodc1.firebolt.para.in.        IN      A       192.168.0.195

    [root@dc1fbreg01 ~]# vim /var/named/rev 
    $TTL 1D
    @       IN SOA  root.redprodc1.firebolt.para.in. dc1fbreg01.redprodc1.firebolt.para.in. (
                                            0       ; serial
                                            1D      ; refresh
                                            1H      ; retry
                                            1W      ; expire
                                            3H )    ; minimum
    @       IN      NS      dc1fbreg01.redprodc1.firebolt.para.in.
    @       IN      A       192.168.0.195
    dc1fbreg01.redprodc1.firebolt.para.in.     IN      A       192.168.0.195
    dc1fbha01.redprodc1.firebolt.para.in.      IN      A       192.168.0.196
    
    dc1fbboot.redprodc1.firebolt.para.in.      IN      A       192.168.0.197
    
    api.redprodc1.firebolt.para.in.            IN      A       192.168.0.31
    api-int.redprodc1.firebolt.para.in.        IN      A       192.168.0.32
    *.apps.redprodc1.firebolt.para.in.         IN      A       192.168.0.33
    
    dc1fbmstr01.redprodc1.firebolt.para.in.        IN      A       192.168.0.198
    dc1fbmstr02.redprodc1.firebolt.para.in.        IN      A       192.168.0.199
    dc1fbmstr03.redprodc1.firebolt.para.in.        IN      A       192.168.0.200
    
    dc1fbinfr01.redprodc1.firebolt.para.in.         IN      A       192.168.0.201
    dc1fbinfr02.redprodc1.firebolt.para.in.         IN      A       192.168.0.202
    dc1fbinfr03.redprodc1.firebolt.para.in.         IN      A       192.168.0.203
    dc1fbinfr04.redprodc1.firebolt.para.in.         IN      A       192.168.0.204
    dc1fbinfr05.redprodc1.firebolt.para.in.         IN      A       192.168.0.205
    
    dc1fbwrk01.redprodc1.firebolt.para.in.        IN      A       192.168.0.206
    dc1fbwrk02.redprodc1.firebolt.para.in.        IN      A       192.168.0.207
    
    classroom.redprodc1.firebolt.para.in.      IN      A       192.168.0.195
    content.redprodc1.firebolt.para.in.        IN      A       192.168.0.195
    195   IN    PTR  dc1fbreg01.redprodc1.firebolt.para.in.
    195   IN    PTR  classroom.redprodc1.firebolt.para.in.
    195   IN    PTR  content.redprodc1.firebolt.para.in.
    31   IN    PTR  api.redprodc1.firebolt.para.in.
    32   IN    PTR  api-int.redprodc1.firebolt.para.in.
    198   IN    PTR  dc1fbmstr01.redprodc1.firebolt.para.in.
    199   IN    PTR  dc1fbmstr02.redprodc1.firebolt.para.in.
    200   IN    PTR  dc1fbmstr03.redprodc1.firebolt.para.in.
    201   IN    PTR  dc1fbinfr01.redprodc1.firebolt.para.in.
    202   IN    PTR  dc1fbinfr02.redprodc1.firebolt.para.in.
    203   IN    PTR  dc1fbinfr03.redprodc1.firebolt.para.in.
    204   IN    PTR  dc1fbinfr04.redprodc1.firebolt.para.in.
    205   IN    PTR  dc1fbinfr05.redprodc1.firebolt.para.in.
    206   IN    PTR  dc1fbwrk01.redprodc1.firebolt.para.in.
    207   IN    PTR  dc1fbwrk02.redprodc1.firebolt.para.in.

    [root@dc1fbreg01 ~]# chown root:named /var/named/for /var/named/rev
    [root@dc1fbreg01 ~]# systemctl enable --now named 
   
Getting nslookup domain.

    [root@dc1fbreg01 ~]# nslookup firebolt.para.in

2.3 Configuration NTP setup. 

Install NTP Package. 

    [root@dc1fbreg01 ~]# yum install -y chrony

Configure NTP. 

    [root@dc1fbreg01 ~]# vim /etc/chrony.conf 
    server 192.168.0.195 iburst
    driftfile /var/lib/chrony/drift
    makestep 1.0 3
    rtcsync
    logdir /var/log/chrony

    [root@dc1fbreg01 ~]# systemctl enable --now chronyd
   
Checking synchronize time.

    [root@dc1fbreg01 ~]# timedatectl 
    [root@dc1fbreg01 ~]# chronyc sources


## 2.4 Quay Registry Configuration.

